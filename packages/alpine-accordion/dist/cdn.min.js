(()=>{var A=Object.defineProperty,y=(i,e,t)=>e in i?A(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,c=(i,e,t)=>y(i,typeof e!="symbol"?e+"":e,t),u=(i,e=document.body)=>e.querySelector(i),l=(i,e=document.body)=>{let t=p(i,e);return Array.from(t).find(n=>n.parentElement===e)},p=(i,e=document.body)=>Array.from(e.querySelectorAll(i)),w=({element:i,callback:e,type:t,keysCheck:n})=>{let o=getComputedStyle(i),s=o.transition;if(s!=="none"&&s!==""&&!n.includes(s)){let a="transitionend",r=()=>{i.removeEventListener(a,r),e()};i.addEventListener(a,r,{once:!0})}else e()},I=({element:i,callback:e})=>{w({element:i,callback:e,type:"transition",keysCheck:["all 0s ease 0s","all"]})},L=(i,e,t)=>{let n=new CustomEvent(e,{detail:t});i.dispatchEvent(n)},C=({container:i,attributeToWatch:e,onChildAdded:t})=>{let n=new MutationObserver(o=>{for(let s of o)if(s.type==="childList"&&Array.from(s.addedNodes).some(a=>a instanceof HTMLElement&&a.hasAttribute(e))){t();break}});return n.observe(i,{childList:!0}),()=>{n.disconnect()}},f=i=>{let e=l("[data-accordion-trigger]",i),t=l("[data-accordion-content]",i),n=i.hasAttribute("data-default-open");if(!(e instanceof HTMLButtonElement))throw new Error("The element does't have a Valid Trigger");if(!(t instanceof HTMLDivElement))throw new Error("No Valid Content Element");let o=i.getAttribute("data-accordion-value")??"",s=e.getAttribute("aria-expanded")==="true";return{accordionTriggerElement:e,accordionContentElement:t,accordionItemValue:o,isItemExpanded:s,defaultOpened:n}},E=(i,e)=>{i.setAttribute("aria-hidden",e==="open"?"false":"true"),i.setAttribute("data-state",e)},x=(i,e="close",t="0px")=>{i.style.height=e==="open"?"auto":t,E(i,e)},T=i=>{if(i.getAttribute("data-state")==="open")return;E(i,"open");let e=i.scrollHeight;i.style.height=`${e}px`,I({element:i,callback:()=>{i.getAttribute("data-state")==="open"&&(i.style.height="auto")}})},k=(i,e="0px")=>{i.getAttribute("data-state")!=="close"&&(i.style.height=`${i.scrollHeight}px`,i.offsetHeight,i.style.height=e,E(i,"close"))},O=(i,e,t)=>{let n=p("[data-accordion-item]",t).filter(a=>a.parentElement===t),o=Array.from(n).indexOf(i.closest("[data-accordion-item]")),s=e?o-1:o+1;return l("[data-accordion-trigger]",n[s])??(e?l("[data-accordion-trigger]",n[n.length-1]):l("[data-accordion-trigger]",n[0]))},S=(i,e)=>{let t=document.activeElement;t instanceof HTMLElement&&t.matches("[data-accordion-trigger]")&&(i.key==="ArrowUp"||i.key==="ArrowDown")&&(i.preventDefault(),O(t,i.key==="ArrowUp",e).focus())},g=(i,e)=>{i.ariaExpanded=e==="open"?"true":"false"},$=({collapsible:i,triggerElement:e,state:t,onInit:n})=>{n?(x(i,t),g(e,t)):t==="open"?(g(e,"open"),T(i)):(g(e,"close"),k(i))},d=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(e,t,n){return this.initGlobalRegistry(),window.$flexillaInstances[e]||(window.$flexillaInstances[e]=[]),this.getInstance(e,t)||(window.$flexillaInstances[e].push({element:t,instance:n}),n)}static getInstance(e,t){var n,o;return this.initGlobalRegistry(),(o=(n=window.$flexillaInstances[e])==null?void 0:n.find(s=>s.element===t))==null?void 0:o.instance}static removeInstance(e,t){this.initGlobalRegistry(),window.$flexillaInstances[e]&&(window.$flexillaInstances[e]=window.$flexillaInstances[e].filter(n=>n.element!==t))}},m=class{constructor(e,t={}){if(c(this,"accordionEl"),c(this,"options"),c(this,"items"),c(this,"eventListeners",[]),c(this,"cleanupObserver",null),c(this,"reload",()=>{this.cleanup(),this.items=p("[data-accordion-item]",this.accordionEl).filter(o=>o.parentElement&&o.parentElement===this.accordionEl),this.initAccordion()}),c(this,"triggerItemState",(o,s,a)=>{this.options.preventClosingAll&&(this.options.accordionType==="single"&&a||this.options.accordionType==="multiple"&&this.items.filter(r=>r.getAttribute("data-state")==="open").length===1&&a)||(this.setItemState(o,s),this.options.accordionType==="single"&&this.closeOther({current:o}),this.dispatchedEvent(o))}),c(this,"cleanup",()=>{this.accordionEl&&(this.items.forEach(o=>{o&&o.hasAttribute("data-state")&&o.removeAttribute("data-state")}),this.eventListeners.forEach(({element:o,type:s,listener:a})=>{o&&o.removeEventListener&&o.removeEventListener(s,a)}),this.cleanupObserver&&(this.cleanupObserver(),this.cleanupObserver=null),this.eventListeners=[],this.items=[],d.removeInstance("accordion",this.accordionEl))}),this.accordionEl=typeof e=="string"?u(e):e,!this.accordionEl)throw new Error(`Accordion element not found: ${typeof e=="string"?`No element matches selector "${e}"`:"Provided HTMLElement is null or undefined"}`);let n=d.getInstance("accordion",this.accordionEl);if(n)return n;this.options={accordionType:this.accordionEl.dataset.accordionType||t.accordionType||"single",preventClosingAll:this.accordionEl.hasAttribute("data-prevent-closing-all")||t.preventClosingAll||!1,defaultValue:this.accordionEl.dataset.defaultValue||t.defaultValue||"",allowCloseFromContent:this.accordionEl.hasAttribute("data-allow-close-from-content")||t.allowCloseFromContent||!1,onChangeItem:t.onChangeItem},this.items=p("[data-accordion-item]",this.accordionEl).filter(o=>o.parentElement&&o.parentElement===this.accordionEl),this.initAccordion()}initAccordion(){if(!this.accordionEl)return;let{accordionType:e,defaultValue:t,preventClosingAll:n}=this.options,o=l(`[data-accordion-item][data-accordion-value="${t}"]`,this.accordionEl);if(e==="single")this.options.preventClosingAll&&!(o instanceof HTMLElement)&&(o=this.items[0]),this.closeOther({current:o}),o&&this.setItemState(o,"open",!0);else{this.closeAll(!0);let a=this.items.some(r=>r.getAttribute("data-state")==="open");if(n&&!a)this.setItemState(this.items[0],"open",!0);else{let r=this.items.filter(h=>h.getAttribute("data-state")==="open");for(let h of r)this.setItemState(h,"open",!0)}}this.addEventListeners();let s=a=>{S(a,this.accordionEl)};this.accordionEl.addEventListener("keydown",s),this.eventListeners.push({element:this.accordionEl,type:"keydown",listener:s}),d.register("accordion",this.accordionEl,this),this.cleanupObserver=C({container:this.accordionEl,attributeToWatch:"data-accordion-item",onChildAdded:this.reload})}destroy(){this.accordionEl&&(this.items.forEach(e=>{e&&e.hasAttribute("data-state")&&e.removeAttribute("data-state")}),this.eventListeners.forEach(({element:e,type:t,listener:n})=>{e&&e.removeEventListener&&e.removeEventListener(t,n)}),this.eventListeners=[],this.items=[],d.removeInstance("accordion",this.accordionEl),this.cleanupObserver&&(this.cleanupObserver(),this.cleanupObserver=null))}setItemState(e,t,n){e.setAttribute("data-state",t);let{accordionContentElement:o,accordionTriggerElement:s}=f(e);$({collapsible:o,triggerElement:s,state:t,onInit:n})}closeOther({current:e,onInit:t}){this.items.forEach(n=>{n!==e&&(t&&this.options.accordionType==="multiple"?n.hasAttribute("data-default-open")?this.setItemState(n,"open"):this.setItemState(n,"close"):this.setItemState(n,"close"))})}closeAll(e){this.closeOther({onInit:e})}dispatchedEvent(e){let{accordionContentElement:t,accordionTriggerElement:n,isItemExpanded:o,accordionItemValue:s}=f(e);this.options.onChangeItem&&this.options.onChangeItem({expandedItem:{accordionItem:this.accordionEl,trigger:n,content:t,value:s,isExpanded:o}}),L(this.accordionEl,"change-item",{targetElement:{trigger:n,content:t,isExpanded:o},items:this.items})}addEventListeners(){this.items.forEach(e=>{let t=u("[data-accordion-trigger]",e),n=u("[data-accordion-content]",e),o=()=>this.triggerItemState(e,"close",!0),s=a=>{a.preventDefault();let r=e.getAttribute("data-state")==="open",h=r?"close":"open";this.triggerItemState(e,h,r)};t&&(t.addEventListener("click",s),this.eventListeners.push({element:t,type:"click",listener:s})),this.options.allowCloseFromContent&&n&&(n.addEventListener("click",o),this.eventListeners.push({element:n,type:"click",listener:o}))})}show(e){let t=l(`[data-accordion-item][data-accordion-value="${e}"]`,this.accordionEl);!t||t.getAttribute("data-state")==="open"||(this.options.accordionType==="single"&&this.closeOther({current:t}),this.setItemState(t,"open"),this.dispatchedEvent(t))}hide(e){let t=l(`[data-accordion-item][data-accordion-value="${e}"]`,this.accordionEl);if(!(!t||t.getAttribute("data-state")!=="open")){if(this.options.preventClosingAll){let n=this.items.filter(o=>o.getAttribute("data-state")==="open");if(n.length===1&&t===n[0])return}this.setItemState(t,"close"),this.dispatchedEvent(t)}}};c(m,"autoInit",(i="[data-fx-accordion]")=>{let e=p(i,document.documentElement);for(let t of e)new m(t)}),c(m,"init",(i,e={})=>new m(i,e));var v=m;function H(i){i.directive("accordion",(e,{},{cleanup:t})=>{let n=new v(e);t(()=>{n.cleanup()})})}var b=H;document.addEventListener("alpine:init",()=>{b(window.Alpine)});})();
