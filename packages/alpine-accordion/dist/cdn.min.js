(()=>{var A=Object.defineProperty,w=(i,t,e)=>t in i?A(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,c=(i,t,e)=>w(i,typeof t!="symbol"?t+"":t,e),u=(i,t=document.body)=>t.querySelector(i),l=(i,t=document.body)=>{let e=p(i,t);return Array.from(e).find(n=>n.parentElement===t)},p=(i,t=document.body)=>Array.from(t.querySelectorAll(i)),I=(i,t,e)=>{let n=new CustomEvent(t,{detail:e});i.dispatchEvent(n)},f=i=>{let t=l("[data-accordion-trigger]",i),e=l("[data-accordion-content]",i),n=i.hasAttribute("data-default-open");if(!(t instanceof HTMLButtonElement))throw new Error("The element does't have a Valid Trigger");if(!(e instanceof HTMLDivElement))throw new Error("No Valid Content Element");let o=i.getAttribute("data-accordion-value")??"",s=t.getAttribute("aria-expanded")==="true";return{accordionTriggerElement:t,accordionContentElement:e,accordionItemValue:o,isItemExpanded:s,defaultOpened:n}},b=({element:i,callback:t,type:e,keysCheck:n})=>{let o=getComputedStyle(i),s=o.transition;if(s!=="none"&&s!==""&&!n.includes(s)){let a="transitionend",r=()=>{i.removeEventListener(a,r),t()};i.addEventListener(a,r,{once:!0})}else t()},x=({element:i,callback:t})=>{b({element:i,callback:t,type:"transition",keysCheck:["all 0s ease 0s","all"]})},E=(i,t)=>{i.setAttribute("aria-hidden",t==="open"?"false":"true"),i.setAttribute("data-state",t)},C=(i,t="close",e="0px")=>{i.style.height=t==="open"?"auto":e,E(i,t)},L=i=>{if(i.getAttribute("data-state")==="open")return;E(i,"open");let t=i.scrollHeight;i.style.height=`${t}px`,x({element:i,callback:()=>{i.getAttribute("data-state")==="open"&&(i.style.height="auto")}})},T=(i,t="0px")=>{i.getAttribute("data-state")!=="close"&&(i.style.height=`${i.scrollHeight}px`,i.offsetHeight,i.style.height=t,E(i,"close"))},k=(i,t,e)=>{let n=p("[data-accordion-item]",e).filter(a=>a.parentElement===e),o=Array.from(n).indexOf(i.closest("[data-accordion-item]")),s=t?o-1:o+1;return l("[data-accordion-trigger]",n[s])??(t?l("[data-accordion-trigger]",n[n.length-1]):l("[data-accordion-trigger]",n[0]))},S=(i,t)=>{let e=document.activeElement;e instanceof HTMLElement&&e.matches("[data-accordion-trigger]")&&(i.key==="ArrowUp"||i.key==="ArrowDown")&&(i.preventDefault(),k(e,i.key==="ArrowUp",t).focus())},g=(i,t)=>{i.ariaExpanded=t==="open"?"true":"false"},$=({collapsible:i,triggerElement:t,state:e,onInit:n})=>{n?(C(i,e),g(t,e)):e==="open"?(g(t,"open"),L(i)):(g(t,"close"),T(i))},m=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(t,e,n){return this.initGlobalRegistry(),window.$flexillaInstances[t]||(window.$flexillaInstances[t]=[]),this.getInstance(t,e)||(window.$flexillaInstances[t].push({element:e,instance:n}),n)}static getInstance(t,e){var n,o;return this.initGlobalRegistry(),(o=(n=window.$flexillaInstances[t])==null?void 0:n.find(s=>s.element===e))==null?void 0:o.instance}static removeInstance(t,e){this.initGlobalRegistry(),window.$flexillaInstances[t]&&(window.$flexillaInstances[t]=window.$flexillaInstances[t].filter(n=>n.element!==e))}},h=class{constructor(t,e={}){if(c(this,"accordionEl"),c(this,"options"),c(this,"items"),c(this,"eventListeners",[]),c(this,"triggerItemState",(o,s,a)=>{this.options.preventClosingAll&&(this.options.accordionType==="single"&&a||this.options.accordionType==="multiple"&&this.items.filter(r=>r.getAttribute("data-state")==="open").length===1&&a)||(this.setItemState(o,s),this.options.accordionType==="single"&&this.closeOther({current:o}),this.dispatchedEvent(o))}),c(this,"cleanup",()=>{this.accordionEl&&(this.items.forEach(o=>{o&&o.hasAttribute("data-state")&&o.removeAttribute("data-state")}),this.eventListeners.forEach(({element:o,type:s,listener:a})=>{o&&o.removeEventListener&&o.removeEventListener(s,a)}),this.eventListeners=[],m.removeInstance("accordion",this.accordionEl),this.items=[],this.options=null,this.accordionEl=null)}),this.accordionEl=typeof t=="string"?u(t):t,!this.accordionEl)throw new Error(`Accordion element not found: ${typeof t=="string"?`No element matches selector "${t}"`:"Provided HTMLElement is null or undefined"}`);let n=m.getInstance("accordion",this.accordionEl);if(n)return n;this.options={accordionType:this.accordionEl.dataset.accordionType||e.accordionType||"single",preventClosingAll:this.accordionEl.hasAttribute("data-prevent-closing-all")||e.preventClosingAll||!1,defaultValue:this.accordionEl.dataset.defaultValue||e.defaultValue||"",allowCloseFromContent:this.accordionEl.hasAttribute("data-allow-close-from-content")||e.allowCloseFromContent||!1,onChangeItem:e.onChangeItem},this.items=p("[data-accordion-item]",this.accordionEl).filter(o=>o.parentElement&&o.parentElement===this.accordionEl),this.initAccordion()}initAccordion(){if(!this.accordionEl)return;let{accordionType:t,defaultValue:e,preventClosingAll:n}=this.options,o=l(`[data-accordion-item][data-accordion-value="${e}"]`,this.accordionEl);if(t==="single")this.options.preventClosingAll&&!(o instanceof HTMLElement)&&(o=this.items[0]),this.closeOther({current:o}),o&&this.setItemState(o,"open",!0);else{this.closeAll(!0);let a=this.items.some(r=>r.getAttribute("data-state")==="open");if(n&&!a)this.setItemState(this.items[0],"open",!0);else{let r=this.items.filter(d=>d.getAttribute("data-state")==="open");for(let d of r)this.setItemState(d,"open",!0)}}this.addEventListeners();let s=a=>{S(a,this.accordionEl)};this.accordionEl.addEventListener("keydown",s),this.eventListeners.push({element:this.accordionEl,type:"keydown",listener:s}),m.register("accordion",this.accordionEl,this)}setItemState(t,e,n){t.setAttribute("data-state",e);let{accordionContentElement:o,accordionTriggerElement:s}=f(t);$({collapsible:o,triggerElement:s,state:e,onInit:n})}closeOther({current:t,onInit:e}){this.items.forEach(n=>{n!==t&&(e&&this.options.accordionType==="multiple"?n.hasAttribute("data-default-open")?this.setItemState(n,"open"):this.setItemState(n,"close"):this.setItemState(n,"close"))})}closeAll(t){this.closeOther({onInit:t})}dispatchedEvent(t){let{accordionContentElement:e,accordionTriggerElement:n,isItemExpanded:o,accordionItemValue:s}=f(t);this.options.onChangeItem&&this.options.onChangeItem({expandedItem:{accordionItem:this.accordionEl,trigger:n,content:e,value:s,isExpanded:o}}),I(this.accordionEl,"change-item",{targetElement:{trigger:n,content:e,isExpanded:o},items:this.items})}addEventListeners(){this.items.forEach(t=>{let e=u("[data-accordion-trigger]",t),n=u("[data-accordion-content]",t),o=()=>this.triggerItemState(t,"close",!0),s=a=>{a.preventDefault();let r=t.getAttribute("data-state")==="open",d=r?"close":"open";this.triggerItemState(t,d,r)};e&&(e.addEventListener("click",s),this.eventListeners.push({element:e,type:"click",listener:s})),this.options.allowCloseFromContent&&n&&(n.addEventListener("click",o),this.eventListeners.push({element:n,type:"click",listener:o}))})}show(t){let e=l(`[data-accordion-item][data-accordion-value="${t}"]`,this.accordionEl);!e||e.getAttribute("data-state")==="open"||(this.options.accordionType==="single"&&this.closeOther({current:e}),this.setItemState(e,"open"),this.dispatchedEvent(e))}hide(t){let e=l(`[data-accordion-item][data-accordion-value="${t}"]`,this.accordionEl);if(!(!e||e.getAttribute("data-state")!=="open")){if(this.options.preventClosingAll){let n=this.items.filter(o=>o.getAttribute("data-state")==="open");if(n.length===1&&e===n[0])return}this.setItemState(e,"close"),this.dispatchedEvent(e)}}};c(h,"autoInit",(i="[data-fx-accordion]")=>{let t=p(i,document.documentElement);for(let e of t)new h(e)}),c(h,"init",(i,t={})=>new h(i,t));var v=h;function H(i){i.directive("accordion",(t,{},{cleanup:e})=>{let n=new v(t);e(()=>{n.cleanup()})})}var y=H;document.addEventListener("alpine:init",()=>{y(window.Alpine)});})();
