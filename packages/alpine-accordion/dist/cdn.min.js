(()=>{var y=Object.defineProperty,A=(n,e,t)=>e in n?y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,c=(n,e,t)=>A(n,typeof e!="symbol"?e+"":e,t),u=(n,e=document.body)=>e.querySelector(n),d=(n,e=document.body)=>{let t=m(n,e);return Array.from(t).find(i=>i.parentElement===e)},m=(n,e=document.body)=>Array.from(e.querySelectorAll(n)),w=({element:n,callback:e,type:t,keysCheck:i})=>{let o=getComputedStyle(n),s=o.transition;if(s!=="none"&&s!==""&&!i.includes(s)){let a="transitionend",r=()=>{n.removeEventListener(a,r),e()};n.addEventListener(a,r,{once:!0})}else e()},I=({element:n,callback:e})=>{w({element:n,callback:e,type:"transition",keysCheck:["all 0s ease 0s","all"]})},L=(n,e,t)=>{let i=new CustomEvent(e,{detail:t});n.dispatchEvent(i)},C=({container:n,attributeToWatch:e,onChildAdded:t})=>{let i=new MutationObserver(o=>{for(let s of o)if(s.type==="childList"&&Array.from(s.addedNodes).some(a=>a instanceof HTMLElement&&a.hasAttribute(e))){t();break}});return i.observe(n,{childList:!0}),()=>{i.disconnect()}},f=n=>{let e=d("[data-accordion-trigger]",n),t=d("[data-accordion-content]",n),i=n.hasAttribute("data-default-open");if(!(e instanceof HTMLButtonElement))throw new Error("The element does't have a Valid Trigger");if(!(t instanceof HTMLDivElement))throw new Error("No Valid Content Element");let o=n.getAttribute("data-accordion-value")??"",s=e.getAttribute("aria-expanded")==="true";return{accordionTriggerElement:e,accordionContentElement:t,accordionItemValue:o,isItemExpanded:s,defaultOpened:i}},g=(n,e)=>{n.setAttribute("aria-hidden",e==="open"?"false":"true"),n.setAttribute("data-state",e)},x=(n,e="close",t="0px")=>{n.style.height=e==="open"?"auto":t,g(n,e)},T=n=>{if(n.getAttribute("data-state")==="open")return;g(n,"open");let e=n.scrollHeight;n.style.height=`${e}px`,I({element:n,callback:()=>{n.getAttribute("data-state")==="open"&&(n.style.height="auto")}})},k=(n,e="0px")=>{n.getAttribute("data-state")!=="close"&&(n.style.height=`${n.scrollHeight}px`,n.offsetHeight,n.style.height=e,g(n,"close"))},O=(n,e,t)=>{let i=m(":scope > [data-accordion-item]",t),o=n.parentElement;if(!i.includes(o))return null;let s=i.indexOf(o),a=e?s-1:s+1,r=i[a]??(e?i[i.length-1]:i[0]),p=d(":scope > [data-accordion-trigger]",r);return p instanceof HTMLElement?p:null},S=(n,e)=>{if(!(document.activeElement instanceof HTMLElement))return;let t=document.activeElement,i=t.parentElement;if(!(!t.matches("[data-accordion-trigger]")||!(i!=null&&i.matches("[data-accordion-item]"))||i.parentElement!==e)&&(n.key==="ArrowUp"||n.key==="ArrowDown")){n.preventDefault();let o=O(t,n.key==="ArrowUp",e);o&&o.focus()}},E=(n,e)=>{n.ariaExpanded=e==="open"?"true":"false"},$=({collapsible:n,triggerElement:e,state:t,onInit:i})=>{i?(x(n,t),E(e,t)):t==="open"?(E(e,"open"),T(n)):(E(e,"close"),k(n))},l=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(e,t,i){return this.initGlobalRegistry(),window.$flexillaInstances[e]||(window.$flexillaInstances[e]=[]),this.getInstance(e,t)||(window.$flexillaInstances[e].push({element:t,instance:i}),i)}static getInstance(e,t){var i,o;return this.initGlobalRegistry(),(o=(i=window.$flexillaInstances[e])==null?void 0:i.find(s=>s.element===t))==null?void 0:o.instance}static removeInstance(e,t){this.initGlobalRegistry(),window.$flexillaInstances[e]&&(window.$flexillaInstances[e]=window.$flexillaInstances[e].filter(i=>i.element!==t))}},h=class{constructor(e,t={}){if(c(this,"accordionEl"),c(this,"options"),c(this,"items"),c(this,"eventListeners",[]),c(this,"cleanupObserver",null),c(this,"handleKeyEvents",o=>{S(o,this.accordionEl)}),c(this,"reload",()=>{this.cleanup(),this.items=m("[data-accordion-item]",this.accordionEl).filter(o=>o.parentElement&&o.parentElement===this.accordionEl),this.initAccordion()}),c(this,"triggerItemState",(o,s,a)=>{this.options.preventClosingAll&&(this.options.accordionType==="single"&&a||this.options.accordionType==="multiple"&&this.items.filter(r=>r.getAttribute("data-state")==="open").length===1&&a)||(this.setItemState(o,s),this.options.accordionType==="single"&&this.closeOther({current:o}),this.dispatchedEvent(o))}),c(this,"cleanup",()=>{this.accordionEl&&(this.items.forEach(o=>{o&&o.hasAttribute("data-state")&&o.removeAttribute("data-state")}),this.eventListeners.forEach(({element:o,type:s,listener:a})=>{o&&o.removeEventListener&&o.removeEventListener(s,a)}),this.cleanupObserver&&(this.cleanupObserver(),this.cleanupObserver=null),this.eventListeners=[],this.items=[],l.removeInstance("accordion",this.accordionEl))}),this.accordionEl=typeof e=="string"?u(e):e,!this.accordionEl)throw new Error(`Accordion element not found: ${typeof e=="string"?`No element matches selector "${e}"`:"Provided HTMLElement is null or undefined"}`);let i=l.getInstance("accordion",this.accordionEl);if(i)return i;this.options={accordionType:this.accordionEl.dataset.accordionType||t.accordionType||"single",preventClosingAll:this.accordionEl.hasAttribute("data-prevent-closing-all")||t.preventClosingAll||!1,defaultValue:this.accordionEl.dataset.defaultValue||t.defaultValue||"",allowCloseFromContent:this.accordionEl.hasAttribute("data-allow-close-from-content")||t.allowCloseFromContent||!1,onChangeItem:t.onChangeItem},this.items=m("[data-accordion-item]",this.accordionEl).filter(o=>o.parentElement&&o.parentElement===this.accordionEl),this.initAccordion()}initAccordion(){if(!this.accordionEl)return;let{accordionType:e,defaultValue:t,preventClosingAll:i}=this.options,o=d(`[data-accordion-item][data-accordion-value="${t}"]`,this.accordionEl);if(e==="single")this.options.preventClosingAll&&!(o instanceof HTMLElement)&&(o=this.items[0]),this.closeOther({current:o}),o&&this.setItemState(o,"open",!0);else{this.closeAll(!0);let s=this.items.some(a=>a.getAttribute("data-state")==="open");if(i&&!s)this.setItemState(this.items[0],"open",!0);else{let a=this.items.filter(r=>r.getAttribute("data-state")==="open");for(let r of a)this.setItemState(r,"open",!0)}}this.addEventListeners(),this.accordionEl.addEventListener("keydown",this.handleKeyEvents),this.eventListeners.push({element:this.accordionEl,type:"keydown",listener:this.handleKeyEvents}),l.register("accordion",this.accordionEl,this),this.cleanupObserver=C({container:this.accordionEl,attributeToWatch:"data-accordion-item",onChildAdded:this.reload})}destroy(){this.accordionEl&&(this.items.forEach(e=>{e&&e.hasAttribute("data-state")&&e.removeAttribute("data-state")}),this.eventListeners.forEach(({element:e,type:t,listener:i})=>{e&&e.removeEventListener&&e.removeEventListener(t,i)}),this.eventListeners=[],this.items=[],l.removeInstance("accordion",this.accordionEl),this.cleanupObserver&&(this.cleanupObserver(),this.cleanupObserver=null))}setItemState(e,t,i){e.setAttribute("data-state",t);let{accordionContentElement:o,accordionTriggerElement:s}=f(e);$({collapsible:o,triggerElement:s,state:t,onInit:i})}closeOther({current:e,onInit:t}){this.items.forEach(i=>{i!==e&&(t&&this.options.accordionType==="multiple"?i.hasAttribute("data-default-open")?this.setItemState(i,"open"):this.setItemState(i,"close"):this.setItemState(i,"close"))})}closeAll(e){this.closeOther({onInit:e})}dispatchedEvent(e){let{accordionContentElement:t,accordionTriggerElement:i,isItemExpanded:o,accordionItemValue:s}=f(e);this.options.onChangeItem&&this.options.onChangeItem({expandedItem:{accordionItem:this.accordionEl,trigger:i,content:t,value:s,isExpanded:o}}),L(this.accordionEl,"change-item",{targetElement:{trigger:i,content:t,isExpanded:o},items:this.items})}addEventListeners(){this.items.forEach(e=>{let t=u("[data-accordion-trigger]",e),i=u("[data-accordion-content]",e),o=()=>this.triggerItemState(e,"close",!0),s=a=>{a.preventDefault();let r=e.getAttribute("data-state")==="open",p=r?"close":"open";this.triggerItemState(e,p,r)};t&&(t.addEventListener("click",s),this.eventListeners.push({element:t,type:"click",listener:s})),this.options.allowCloseFromContent&&i&&(i.addEventListener("click",o),this.eventListeners.push({element:i,type:"click",listener:o}))})}show(e){let t=d(`[data-accordion-item][data-accordion-value="${e}"]`,this.accordionEl);!t||t.getAttribute("data-state")==="open"||(this.options.accordionType==="single"&&this.closeOther({current:t}),this.setItemState(t,"open"),this.dispatchedEvent(t))}hide(e){let t=d(`[data-accordion-item][data-accordion-value="${e}"]`,this.accordionEl);if(!(!t||t.getAttribute("data-state")!=="open")){if(this.options.preventClosingAll){let i=this.items.filter(o=>o.getAttribute("data-state")==="open");if(i.length===1&&t===i[0])return}this.setItemState(t,"close"),this.dispatchedEvent(t)}}};c(h,"autoInit",(n="[data-fx-accordion]")=>{let e=m(n,document.documentElement);for(let t of e)new h(t)}),c(h,"init",(n,e={})=>new h(n,e));var v=h;function H(n){n.directive("accordion",(e,{},{cleanup:t})=>{let i=new v(e);t(()=>{i.cleanup()})})}var b=H;document.addEventListener("alpine:init",()=>{b(window.Alpine)});})();
