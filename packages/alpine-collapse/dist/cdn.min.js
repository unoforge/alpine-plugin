(()=>{var w=Object.defineProperty,x=(t,e,s)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,n=(t,e,s)=>x(t,typeof e!="symbol"?e+"":e,s),d=(t,e=document.body)=>e.querySelector(t),y=(t,e=document.body)=>Array.from(e.querySelectorAll(t)),b=({element:t,callback:e,type:s,keysCheck:l})=>{let o=getComputedStyle(t),r=o.transition;if(r!=="none"&&r!==""&&!l.includes(r)){let i="transitionend",a=()=>{t.removeEventListener(i,a),e()};t.addEventListener(i,a,{once:!0})}else e()},v=({element:t,callback:e})=>{b({element:t,callback:e,type:"transition",keysCheck:["all 0s ease 0s","all"]})},p=(t,e,s)=>{let l=new CustomEvent(e,{detail:s});t.dispatchEvent(l)},g=(t,e)=>{t.setAttribute("aria-hidden",e==="open"?"false":"true"),t.setAttribute("data-state",e)},E=(t,e="close",s="0px")=>{t.style.height=e==="open"?"auto":s,g(t,e)},I=t=>{if(t.getAttribute("data-state")==="open")return;g(t,"open");let e=t.scrollHeight;t.style.height=`${e}px`,v({element:t,callback:()=>{t.getAttribute("data-state")==="open"&&(t.style.height="auto")}})},T=(t,e="0px")=>{t.getAttribute("data-state")!=="close"&&(t.style.height=`${t.scrollHeight}px`,t.offsetHeight,t.style.height=e,g(t,"close"))},h=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(e,s,l){return this.initGlobalRegistry(),window.$flexillaInstances[e]||(window.$flexillaInstances[e]=[]),this.getInstance(e,s)||(window.$flexillaInstances[e].push({element:s,instance:l}),l)}static getInstance(e,s){var l,o;return this.initGlobalRegistry(),(o=(l=window.$flexillaInstances[e])==null?void 0:l.find(r=>r.element===s))==null?void 0:o.instance}static removeInstance(e,s){this.initGlobalRegistry(),window.$flexillaInstances[e]&&(window.$flexillaInstances[e]=window.$flexillaInstances[e].filter(l=>l.element!==s))}},c=class{constructor(e,s={},l){n(this,"element"),n(this,"defaultState"),n(this,"collapseId"),n(this,"collapseTrigger"),n(this,"options"),n(this,"closeHeight"),n(this,"show",()=>{var i,a;p(this.element,"before-expand",{isExpanded:!1}),this.collapseTrigger&&(this.collapseTrigger.ariaExpanded="true"),I(this.element),(a=(i=this.options).onToggle)==null||a.call(i,{isExpanded:!0}),p(this.element,"expanded",{isExpanded:!1})}),n(this,"hide",()=>{var i,a;this.collapseTrigger&&(this.collapseTrigger.ariaExpanded="false"),T(this.element,`${this.closeHeight}px`),(a=(i=this.options).onToggle)==null||a.call(i,{isExpanded:!1}),p(this.element,"collapsed",{isExpanded:!1})}),n(this,"toggle",()=>{var i,a;let m=this.element.dataset.state==="open";m?this.hide():this.show(),(a=(i=this.options).onToggle)==null||a.call(i,{isExpanded:!m})}),n(this,"setCloseHeight",i=>{this.closeHeight=i});let o;if(o=typeof e=="string"?d(`${e}`):e,typeof e=="string"&&!o)throw new Error(`No element found matching selector: ${e}`);if(!(o instanceof HTMLElement))throw new Error("Provided element must be a valid HTMLElement or selector");this.element=o;let r=h.getInstance("collapse",this.element);if(r)return r;this.collapseId=this.element.getAttribute("id"),this.collapseTrigger=d(`${l}`)||d(`[data-collapse-trigger][data-target*='${this.collapseId}']`),this.options=s,this.defaultState=this.element.dataset.state?this.element.dataset.state==="open"?"open":"close":this.options.defaultState||"close",this.closeHeight=this.element.dataset.closeHeight?parseInt(this.element.dataset.closeHeight||"0"):this.options.closeHeight||0,this.initCollapse(),h.register("collapse",this.element,this)}initCollapse(){this.collapseTrigger instanceof HTMLElement&&(this.collapseTrigger.addEventListener("click",this.toggle),this.collapseTrigger.ariaExpanded=this.defaultState==="open"?"true":"false"),E(this.element,this.defaultState,`${this.closeHeight}px`)}cleanup(){this.collapseTrigger instanceof HTMLElement&&this.collapseTrigger.removeEventListener("click",this.toggle),h.removeInstance("collapse",this.element)}};n(c,"init",(t,e={},s)=>new c(t,e,s)),n(c,"autoInit",(t="[data-fx-collapse]")=>{let e=y(t);for(let s of e)new c(s)});var f=c;function $(t){t.directive("f-collapse",(e,{},{cleanup:s})=>{let l=new f(e);s(()=>{l.cleanup()})})}var u=$;document.addEventListener("alpine:init",()=>{u(window.Alpine)});})();
