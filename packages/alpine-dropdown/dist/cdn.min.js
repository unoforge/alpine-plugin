(()=>{var J=Object.defineProperty,Q=(t,e,n)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l=(t,e,n)=>Q(t,typeof e!="symbol"?e+"":e,n),V=Object.defineProperty,X=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m=(t,e,n)=>X(t,typeof e!="symbol"?e+"":e,n),Y="bottom",Z=({reference:t,popper:e})=>{if(!t||!e)throw new Error("Reference or popper element is null or undefined");let n=new WeakMap,i=o=>(n.has(o)||n.set(o,o.getBoundingClientRect()),n.get(o)),r=i(e),s=i(t);return{popperHeight:r.height,popperWidth:r.width,refHeight:s.height,refWidth:s.width,refLeft:s.left,refTop:s.top,refRight:s.right}},_=(t,e,n,i)=>{let r=n,s=i-(n+e);return r>=(t-e)/2&&s>=(t-e)/2},ee=(t,e,n,i)=>(t-e)/2<=n&&n+t/2+e/2<=i,te=(t,e,n,i,r)=>n>r-i?e()?window.innerHeight-r:n-r:t()?0:n+i,ne=(t,e,n,i)=>t<=i&&n-t<=e,ie=(t,e,n,i)=>n<=i&&-t<=e,se=(t,e,n,i,r,s)=>{let o=r-n-s,a=n-i,p=n+s-i+(r-n-s),c=o>=0?r-i:a>=0?n-i:n;return t()?0:e()?p:c},oe=(t,e,n,i)=>t<=n&&e-t-i>=t,re=(t,e)=>t>=e,ae=({placement:t,refWidth:e,refTop:n,refLeft:i,refHeight:r,popperWidth:s,popperHeight:o,windowHeight:a,windowWidth:p,offsetDistance:c})=>{let d=p-i-e,f=i,u=a-n-r,g=n,w=()=>te(()=>ie(n,r,o,a),()=>ne(n,r,o,a),n,r,o),b=()=>se(()=>oe(i,p,s,e),()=>re(i,s),i,s,p,e),I=()=>_(s,e,i,p)?i+e/2-s/2:b(),M=()=>ee(o,r,n,a)?n+r/2-o/2:w(),x=()=>i+s<=p?i:b(),S=()=>i+e-s>=0?i+e-s:b(),L=()=>n+o<=a?n:w(),q=()=>n+r-o>=0?n+r-o:w(),v=0,E=0,C=n-o-c,D=n+r+c,k=i-s-c,H=i+e+c,A=g>=o+c,N=u>=o+c,$=f>=s+c,K=d>=s+c;switch(t.startsWith("top")?E=A?C:N?D:Math.max(C,D):t.startsWith("bottom")?E=N?D:A?C:Math.max(D):t.startsWith("left")?v=$?k:K?H:Math.max(k,H):t.startsWith("right")&&(v=K?H:$?k:Math.max(H,k)),t){case"bottom":case"bottom-middle":case"top":case"top-middle":v=I();break;case"left":case"left-middle":case"right":case"right-middle":E=M();break;case"bottom-start":case"top-start":v=x();break;case"bottom-end":case"top-end":v=S();break;case"left-start":case"right-start":E=L();break;case"left-end":case"right-end":E=q();break}return{x:v,y:E}},T=class{constructor(e,n,i={}){m(this,"reference"),m(this,"popper"),m(this,"offsetDistance"),m(this,"placement"),m(this,"disableOnResize"),m(this,"disableOnScroll"),m(this,"onUpdate"),m(this,"isWindowEventsRegistered"),m(this,"validateElements",()=>{if(!(this.reference instanceof HTMLElement))throw new Error("Invalid HTMLElement for Reference Element");if(!(this.popper instanceof HTMLElement))throw new Error("Invalid HTMLElement for Popper");if(typeof this.offsetDistance!="number")throw new Error("OffsetDistance must be a number")}),m(this,"setPopperStyleProperty",(d,f)=>{this.popper.style.setProperty("--fx-popper-placement-x",`${d}px`),this.popper.style.setProperty("--fx-popper-placement-y",`${f}px`)}),m(this,"setInitialStyles",()=>{this.popper.style.setProperty("--fx-popper-placement-x",""),this.popper.style.setProperty("--fx-popper-placement-y","")}),m(this,"initPlacement",()=>{var d;this.validateElements(),this.setInitialStyles();let f=window.innerWidth,u=window.innerHeight,{popperHeight:g,popperWidth:w,refHeight:b,refWidth:I,refLeft:M,refTop:x}=Z({reference:this.reference,popper:this.popper}),{x:S,y:L}=ae({placement:this.placement,refWidth:I,refTop:x,refLeft:M,popperWidth:w,refHeight:b,popperHeight:g,windowHeight:u,windowWidth:f,offsetDistance:this.offsetDistance});this.setPopperStyleProperty(S,L),(d=this.onUpdate)==null||d.call(this,{x:S,y:L,placement:this.placement})}),m(this,"removeWindowEvents",()=>{this.isWindowEventsRegistered&&(!this.disableOnResize&&window.removeEventListener("resize",this.updatePosition),!this.disableOnScroll&&window.removeEventListener("scroll",this.updatePosition),this.isWindowEventsRegistered=!1)}),m(this,"attachWindowEvent",()=>{this.isWindowEventsRegistered&&this.removeWindowEvents(),this.disableOnResize||window.addEventListener("resize",this.updatePosition),this.disableOnScroll||window.addEventListener("scroll",this.updatePosition),this.isWindowEventsRegistered=!0}),m(this,"resetPosition",()=>{this.setInitialStyles()}),m(this,"updatePosition",()=>{this.initPlacement(),this.attachWindowEvent()}),m(this,"cleanupEvents",()=>{this.setInitialStyles(),this.removeWindowEvents()});let{offsetDistance:r=10,placement:s=Y,eventEffect:o={},onUpdate:a}=i;if(!(e instanceof HTMLElement))throw new Error("Invalid HTMLElement for Reference Element");if(!(n instanceof HTMLElement))throw new Error("Invalid HTMLElement for Popper");if(i.offsetDistance&&typeof i.offsetDistance!="number")throw new Error("OffsetDistance must be a number");let{disableOnResize:p,disableOnScroll:c}=o;this.isWindowEventsRegistered=!1,this.reference=e,this.popper=n,this.offsetDistance=r,this.placement=s,this.disableOnResize=p||!1,this.disableOnScroll=c||!1,this.onUpdate=a}setOptions({placement:e,offsetDistance:n}){this.placement=e,this.offsetDistance=n||this.offsetDistance,this.initPlacement(),this.attachWindowEvent()}},le=Object.defineProperty,he=(t,e,n)=>e in t?le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e,n)=>he(t,typeof e!="symbol"?e+"":e,n),pe=(t,e=document.body)=>e.querySelector(t),z=(t,e)=>{for(let[n,i]of Object.entries(e))t.setAttribute(n,i)},de=({element:t,callback:e,type:n,keysCheck:i})=>{let r=getComputedStyle(t),s=r.transition;if(s!=="none"&&s!==""&&!i.includes(s)){let o="transitionend",a=()=>{t.removeEventListener(o,a),e()};t.addEventListener(o,a,{once:!0})}else e()},ce=({element:t,callback:e})=>{de({element:t,callback:e,type:"transition",keysCheck:["all 0s ease 0s","all"]})},me=(t,e,n)=>{let i=new CustomEvent(e,{detail:n});t.dispatchEvent(i)},y=({state:t,trigger:e,popper:n})=>{let i=t==="open";z(n,{"data-state":t}),z(e,{"aria-expanded":`${i}`})},P=class{constructor({trigger:e,content:n,options:i={}}){h(this,"triggerElement"),h(this,"contentElement"),h(this,"triggerStrategy"),h(this,"placement"),h(this,"offsetDistance"),h(this,"preventFromCloseOutside"),h(this,"preventFromCloseInside"),h(this,"options"),h(this,"defaultState"),h(this,"popper"),h(this,"eventEffect"),h(this,"getElement",s=>typeof s=="string"?pe(s):s instanceof HTMLElement?s:void 0),h(this,"handleDocumentClick",s=>{this.contentElement.getAttribute("data-state")==="open"&&(!this.triggerElement.contains(s.target)&&!this.preventFromCloseInside&&!this.preventFromCloseOutside?this.hide():!this.triggerElement.contains(s.target)&&!this.contentElement.contains(s.target)&&!this.preventFromCloseOutside?this.hide():!this.triggerElement.contains(s.target)&&!this.contentElement.contains(s.target)&&!this.preventFromCloseOutside?this.hide():!this.triggerElement.contains(s.target)&&this.contentElement.contains(s.target)&&!this.preventFromCloseInside&&this.hide())}),h(this,"handleKeyDown",s=>{s.preventDefault(),this.triggerStrategy!=="hover"&&s.key==="Escape"&&this.contentElement.getAttribute("data-state")==="open"&&(this.preventFromCloseOutside||this.hide())}),h(this,"toggleStateOnClick",()=>{(this.contentElement.dataset.state||"close")==="close"?(this.show(),this.triggerStrategy==="hover"&&this.addEventOnMouseEnter()):this.hide()}),h(this,"hideOnMouseLeaseTrigger",()=>{setTimeout(()=>{this.contentElement.matches(":hover")||this.hide()},150)}),h(this,"hideOnMouseLeave",()=>{setTimeout(()=>{this.triggerElement.matches(":hover")||this.hide()},150)}),h(this,"addEventOnMouseEnter",()=>{this.triggerElement.addEventListener("mouseleave",this.hideOnMouseLeaseTrigger),this.contentElement.addEventListener("mouseleave",this.hideOnMouseLeave)}),h(this,"showOnMouseEnter",()=>{this.show(),this.addEventOnMouseEnter()}),h(this,"setShowOptions",({placement:s,offsetDistance:o})=>{var a,p,c,d;this.popper.setOptions({placement:s,offsetDistance:o}),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("click",this.handleDocumentClick),(p=(a=this.options).beforeShow)==null||p.call(a),y({state:"open",popper:this.contentElement,trigger:this.triggerElement}),this.onToggleState(!1),(d=(c=this.options).onShow)==null||d.call(c)}),h(this,"setPopperOptions",({placement:s,offsetDistance:o})=>{this.popper.setOptions({placement:s,offsetDistance:o||this.offsetDistance})}),h(this,"setPopperTrigger",(s,o)=>{this.cleanup(),this.popper.setOptions({placement:o.placement||this.placement,offsetDistance:o.offsetDistance||this.offsetDistance}),this.triggerElement=s,this.triggerElement.addEventListener("click",this.toggleStateOnClick),this.triggerStrategy==="hover"&&this.triggerElement.addEventListener("mouseenter",this.showOnMouseEnter)}),h(this,"cleanup",()=>{this.triggerElement.removeEventListener("click",this.toggleStateOnClick),this.triggerStrategy==="hover"&&this.triggerElement.removeEventListener("mouseenter",this.showOnMouseEnter)});var r;if(this.contentElement=this.getElement(n),this.triggerElement=this.getElement(e),!(this.triggerElement instanceof HTMLElement))throw new Error("Trigger element must be a valid HTML element");if(!(this.contentElement instanceof HTMLElement))throw new Error("Content element must be a valid HTML element");this.options=i,this.triggerStrategy=this.options.triggerStrategy||"click",this.placement=this.options.placement||"bottom",this.offsetDistance=this.options.offsetDistance||6,this.preventFromCloseOutside=this.options.preventFromCloseOutside||!1,this.preventFromCloseInside=this.options.preventCloseFromInside||!1,this.defaultState=this.options.defaultState||"close",this.eventEffect=(r=this.options.popper)==null?void 0:r.eventEffect,this.popper=new T(this.triggerElement,this.contentElement,{placement:this.placement,offsetDistance:this.offsetDistance,eventEffect:this.eventEffect}),this.initInstance()}onToggleState(e){var n,i;(i=(n=this.options).onToggle)==null||i.call(n,{isHidden:e})}show(){var e,n,i,r;this.popper.updatePosition(),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("click",this.handleDocumentClick),(n=(e=this.options).beforeShow)==null||n.call(e),y({state:"open",popper:this.contentElement,trigger:this.triggerElement}),this.onToggleState(!1),(r=(i=this.options).onShow)==null||r.call(i)}hide(){var e,n,i;let r=!1;me(this.contentElement,"before-hide",{setExitAction:o=>{r=o}});let s=(i=(n=(e=this.options).beforeHide)==null?void 0:n.call(e))==null?void 0:i.cancelAction;r||s||(y({state:"close",popper:this.contentElement,trigger:this.triggerElement}),this.triggerStrategy==="click"&&document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleKeyDown),this.triggerStrategy==="hover"&&(this.triggerElement.removeEventListener("mouseleave",this.hideOnMouseLeaseTrigger),this.contentElement.removeEventListener("mouseleave",this.hideOnMouseLeave)),ce({element:this.contentElement,callback:()=>{var o,a;this.onToggleState(!0),this.popper.cleanupEvents(),(a=(o=this.options).onHide)==null||a.call(o)}}))}initInstance(){y({state:this.defaultState,popper:this.contentElement,trigger:this.triggerElement}),this.defaultState==="open"?this.show():y({state:"close",popper:this.contentElement,trigger:this.triggerElement}),this.triggerElement.addEventListener("click",this.toggleStateOnClick),this.triggerStrategy==="hover"&&this.triggerElement.addEventListener("mouseenter",this.showOnMouseEnter)}},W=(t,e=document.body)=>e.querySelector(t),R=(t,e=document.body)=>Array.from(e.querySelectorAll(t)),ge=t=>typeof t=="string"?W(t):t,fe=({containerElement:t,targetChildren:e="a:not([disabled]), button:not([disabled])",direction:n})=>{let i=!1,r=ge(t)||document.body,s=typeof e=="string"?R(e,r):e,o=a=>{if(a.preventDefault(),r.focus(),s.length===0)return;let p=a.key,c=document.activeElement,d=s.findIndex(g=>g===c);if(d===-1){p==="ArrowUp"||p==="ArrowLeft"?s[s.length-1].focus():s[0].focus();return}let f=g=>g>0?g-1:s.length-1,u=g=>g<s.length-1?g+1:0;switch(p){case"ArrowDown":a.preventDefault(),d=u(d);break;case"ArrowRight":break;case"ArrowUp":a.preventDefault(),d=f(d);break;case"ArrowLeft":break;case"Home":a.preventDefault(),d=0;break;case"End":a.preventDefault(),d=s.length-1;break;default:return}s[d]!==c&&s[d].focus()};return{make:()=>{i||(document.addEventListener("keydown",o),i=!0)},destroy:()=>{i&&(document.removeEventListener("keydown",o),i=!1)}}},U=(t,e,n)=>{let i=new CustomEvent(e,{detail:n});t.dispatchEvent(i)};function ve(t,e,n="move"){if(!(t instanceof HTMLElement))throw new Error("Source element must be an HTMLElement");if(!(e instanceof HTMLElement))throw new Error("Target element must be an HTMLElement");if(!["move","detachable"].includes(n))throw new Error(`Invalid teleport mode: ${n}. Must be "move" or "detachable".`);let i=document.createComment("teleporter-placeholder"),r=t.parentNode;return r?r.insertBefore(i,t):console.warn("Element has no parent; placeholder not inserted."),n==="move"?(t.parentNode&&e.appendChild(t),{append(){t.parentNode!==e&&e.appendChild(t)},remove(){i!=null&&i.parentNode&&t.parentNode&&i.parentNode.insertBefore(t,i)},restore(){i!=null&&i.parentNode&&t.parentNode!==r&&i.parentNode.insertBefore(t,i)}}):(t.parentNode&&e.appendChild(t),{append(){e.contains(t)||e.appendChild(t)},remove(){t.parentNode&&t.remove()},restore(){i!=null&&i.parentNode&&!t.parentNode&&i.parentNode.insertBefore(t,i)}})}var O=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(e,n,i){return this.initGlobalRegistry(),window.$flexillaInstances[e]||(window.$flexillaInstances[e]=[]),this.getInstance(e,n)||(window.$flexillaInstances[e].push({element:n,instance:i}),i)}static getInstance(e,n){var i,r;return this.initGlobalRegistry(),(r=(i=window.$flexillaInstances[e])==null?void 0:i.find(s=>s.element===n))==null?void 0:r.instance}static removeInstance(e,n){this.initGlobalRegistry(),window.$flexillaInstances[e]&&(window.$flexillaInstances[e]=window.$flexillaInstances[e].filter(i=>i.element!==n))}},Ee={teleport:!0,teleportMode:"move"},F=class j{constructor(e,n={}){l(this,"triggerElement"),l(this,"contentElement"),l(this,"items",[]),l(this,"options"),l(this,"OverlayInstance"),l(this,"navigationKeys"),l(this,"keyObserver"),l(this,"triggerStrategy"),l(this,"placement"),l(this,"offsetDistance"),l(this,"preventFromCloseOutside"),l(this,"preventFromCloseInside"),l(this,"defaultState"),l(this,"experimentalOptions"),l(this,"teleporter"),l(this,"observeEl",()=>{this.keyObserver=new MutationObserver(o=>{for(let a of o)a.type==="attributes"&&a.attributeName==="aria-expanded"&&(a.target.getAttribute("aria-expanded")==="true"?this.navigationKeys.destroy():this.navigationKeys.make())});for(let o of this.items)o.hasAttribute("data-dropdown-trigger")&&this.keyObserver.observe(o,{attributes:!0,attributeFilter:["aria-expanded"]})}),l(this,"onToggle",({isHidden:o})=>{var a,p;(p=(a=this.options).onToggle)==null||p.call(a,{isHidden:o})}),l(this,"moveElOnInit",()=>{this.experimentalOptions.teleport&&(this.experimentalOptions.teleportMode==="detachable"?this.teleporter.remove():this.teleporter.append())}),l(this,"moveEl",()=>{this.experimentalOptions.teleport&&this.experimentalOptions.teleportMode==="detachable"&&this.teleporter.remove()}),l(this,"restoreEl",()=>{this.experimentalOptions.teleport&&this.experimentalOptions.teleportMode==="detachable"&&this.teleporter.append()}),l(this,"beforeShow",()=>{this.restoreEl(),this.contentElement.focus(),this.navigationKeys.make()}),l(this,"beforeHide",()=>{this.contentElement.blur(),this.navigationKeys.destroy()}),l(this,"onShow",()=>{var o,a;U(this.contentElement,"dropdown-show",{isHidden:!1}),(a=(o=this.options).onShow)==null||a.call(o)}),l(this,"onHide",()=>{var o,a;U(this.contentElement,"dropdown-hide",{isHidden:!0}),(a=(o=this.options).onHide)==null||a.call(o),this.moveEl()}),l(this,"show",()=>{this.OverlayInstance.show()}),l(this,"hide",()=>{this.OverlayInstance.hide()}),l(this,"setShowOptions",({placement:o,offsetDistance:a})=>{this.OverlayInstance.setShowOptions({placement:o,offsetDistance:a})}),l(this,"setOptions",({placement:o,offsetDistance:a})=>{this.OverlayInstance.setPopperOptions({placement:o,offsetDistance:a})}),l(this,"setPopperTrigger",(o,a)=>{this.OverlayInstance.setPopperTrigger(o,a)}),l(this,"disconnectObserver",()=>{this.keyObserver&&this.keyObserver.disconnect()}),l(this,"cleanup",()=>{this.disconnectObserver(),this.OverlayInstance.cleanup(),O.removeInstance("dropdown",this.contentElement)});let i=typeof e=="string"?W(e):e;if(!(i instanceof HTMLElement))throw new Error("Invalid dropdown content element: Must provide either a valid HTMLElement or a selector string that resolves to an existing HTMLElement");if(!i.id)throw new Error("Dropdown content element must have an 'id' attribute for trigger association");this.contentElement=i;let r=O.getInstance("dropdown",this.contentElement);if(r)return r;let s=`[data-dropdown-trigger][data-dropdown-id=${this.contentElement.id}]`;if(this.triggerElement=W(s),!(this.triggerElement instanceof HTMLElement))throw new Error(`No valid trigger element found. Ensure a trigger element exists with attributes: data-dropdown-trigger and data-dropdown-id="${this.contentElement.id}"`);this.options=n,this.triggerStrategy=this.options.triggerStrategy||this.contentElement.dataset.triggerStrategy||"click",this.placement=this.options.placement||this.contentElement.dataset.placement||"bottom-start",this.offsetDistance=this.options.offsetDistance||parseInt(`${this.contentElement.dataset.offsetDistance}`)|6,this.preventFromCloseOutside=this.options.preventFromCloseOutside||this.contentElement.hasAttribute("data-prevent-close-outside")||!1,this.preventFromCloseInside=this.options.preventCloseFromInside||this.contentElement.hasAttribute("data-prevent-close-inside")||!1,this.defaultState=this.options.defaultState||this.contentElement.dataset.defaultState||"close",this.experimentalOptions=Object.assign({},Ee,n.experimental),this.teleporter=ve(this.contentElement,document.body,this.experimentalOptions.teleportMode),this.OverlayInstance=new P({trigger:this.triggerElement,content:this.contentElement,options:{placement:this.placement,offsetDistance:this.offsetDistance,triggerStrategy:this.triggerStrategy,preventFromCloseOutside:this.preventFromCloseOutside,preventCloseFromInside:this.preventFromCloseInside,defaultState:this.defaultState,beforeShow:this.beforeShow,beforeHide:this.beforeHide,onShow:this.onShow,onHide:this.onHide,onToggle:({isHidden:o})=>{this.onToggle({isHidden:o})},popper:this.options.popper}}),this.moveElOnInit(),this.items=R("a:not([disabled]), button:not([disabled])",this.contentElement),this.navigationKeys=fe({containerElement:this.contentElement,targetChildren:this.items,direction:"up-down"}),this.observeEl(),O.register("dropdown",this.contentElement,this)}static init(e,n={}){new j(e,n)}};l(F,"autoInit",(t="[data-fx-dropdown]")=>{let e=R(t);for(let n of e)new F(n)});var B=F;function ue(t){t.directive("dropdown",(e,{},{cleanup:n})=>{let i=new B(e);n(()=>{i.cleanup()})})}var G=ue;document.addEventListener("alpine:init",()=>{G(window.Alpine)});})();
