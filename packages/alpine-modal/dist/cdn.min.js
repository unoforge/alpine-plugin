(()=>{var Q=Object.defineProperty,U=(e,t,a)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,r=(e,t,a)=>U(e,typeof t!="symbol"?t+"":t,a),p=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(t,a,n){return this.initGlobalRegistry(),window.$flexillaInstances[t]||(window.$flexillaInstances[t]=[]),this.getInstance(t,a)||(window.$flexillaInstances[t].push({element:a,instance:n}),n)}static getInstance(t,a){var n,o;return this.initGlobalRegistry(),(o=(n=window.$flexillaInstances[t])==null?void 0:n.find(d=>d.element===a))==null?void 0:o.instance}static removeInstance(t,a){this.initGlobalRegistry(),window.$flexillaInstances[t]&&(window.$flexillaInstances[t]=window.$flexillaInstances[t].filter(n=>n.element!==a))}},c=(e,t=document.body)=>t.querySelector(e),I=(e,t=document.body)=>Array.from(t.querySelectorAll(e)),V=({newElement:e,existingElement:t})=>{if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))throw new Error("Both parameters must be valid HTML elements.");let a=t.parentElement;if(a)a.insertBefore(e,t);else throw new Error("Existing element must have a parent element.")},W=({element:e,callback:t,type:a,keysCheck:n})=>{let o=getComputedStyle(e),d=o.animation;if(d!=="none"&&d!==""&&!n.includes(d)){let m="animationend",u=()=>{e.removeEventListener(m,u),t()};e.addEventListener(m,u,{once:!0})}else t()},Y=({element:e,callback:t})=>{W({element:e,callback:t,type:"animation",keysCheck:["none 0s ease 0s 1 normal none running"]})},G=(e,t,a)=>{let n=new CustomEvent(t,{detail:a});e.dispatchEvent(n)},j=e=>{var t;e instanceof HTMLElement&&((t=e.parentElement)==null||t.removeChild(e))},X=({modalContent:e,overlayClassName:t})=>{let a=document.createElement("span");return a.setAttribute("aria-hidden","true"),V({newElement:a,existingElement:e}),a.classList.add(...t),a.setAttribute("data-modal-overlay",""),a},H=(e,t,a)=>{if(!(t instanceof HTMLElement))throw new Error("No modal-content found");e.setAttribute("aria-hidden",a==="open"?"false":"true"),e.setAttribute("data-state",a),t.setAttribute("data-state",a);let n=c("[data-modal-overlay]",e);n instanceof HTMLElement&&n.setAttribute("data-state",a)},Z=(e,t,a)=>{if(!e){t||(document.body.style.overflowY="auto");return}I("[data-fx-modal][data-state=open]:not([data-allow-body-scroll=true]").filter(n=>n!==a).length===0&&!t&&(document.body.style.overflowY="auto")},_=(e,t,a)=>{var n;if(!(e instanceof HTMLElement))throw new Error("Modal Element must be a valid element");let{animateContent:o,allowBodyScroll:d,preventCloseModal:m,overlayClass:u,onShow:h,onHide:E,onToggle:f,beforeHide:M,enableStackedModals:k}=a,T=d||e.hasAttribute("data-allow-body-scroll")&&e.getAttribute("data-allow-body-scroll")!=="false",J=m||e.hasAttribute("data-prevent-close-modal")&&e.getAttribute("data-prevent-close-modal")!=="false",R=k||e.hasAttribute("data-enable-stacked")&&e.getAttribute("data-enable-stacked")!=="false",K=u?.split(" ")||((n=e.dataset.modalOverlay)==null?void 0:n.split(" "))||"",A=!1;e.setAttribute("data-allow-body-scroll",`${T}`);let i=c("[data-modal-content]",e),g=I("[data-close-modal]",e),s=null,C=!1;if(c("[data-modal-overlay]",e)instanceof HTMLElement&&(s=c("[data-modal-overlay]",e),s.setAttribute("data-overlay-nature","default"),C=!0),!(i instanceof HTMLElement))throw new Error("Modal content element not found");let B=i.dataset.enterAnimation||"",N=i.dataset.exitAnimation||"";i.setAttribute("data-state","close");let q=l=>{l.preventDefault(),l.key==="Escape"&&!J&&w()},O=l=>{if(R)return;let L=I("[data-fx-modal][data-state=open]");for(let v of L)if(v!==l){let b=c("[data-modal-overlay]",v);b.setAttribute("data-state","close");let S=c("[data-modal-content]",v),x=b.getAttribute("data-overlay-nature")==="default";H(v,S,"close"),x||j(b)}},$=()=>{if(e.getAttribute("data-state")!=="open"){if(O(e),s=C?s:X({modalContent:i,overlayClassName:K}),s?.setAttribute("data-state","open"),G(e,"modal-open",{modalId:e.id}),o||B!==""){let l=o?o.enterAnimation:B;l!==""&&i.style.setProperty("--un-modal-animation",l),H(e,i,"open"),Y({element:i,callback:()=>{i.style.removeProperty("--un-modal-animation")}})}else H(e,i,"open");T||(document.body.style.overflow="hidden"),A||(document.addEventListener("keydown",q),A=!0),e.focus(),m||s.addEventListener("click",w),h?.(),f?.({isHidden:!1})}},w=()=>{var l;let L=!1;G(e,"before-hide",{modalId:e.id,setExitAction:P=>{L=P}});let v=(l=M?.())==null?void 0:l.cancelAction;if(L||v)return;let b=()=>{H(e,i,"close"),Z(R,T,e),C||j(s),G(e,"modal-close",{modalId:e.id})},S=()=>{A&&(document.removeEventListener("keydown",q),A=!1),e.blur(),E?.(),f?.({isHidden:!0})},x=o?.exitAnimation&&o.exitAnimation!==""||N!=="";if(s?.setAttribute("data-state","close"),i.setAttribute("data-state","close"),x){let P=o?o.exitAnimation||"":N;i.style.setProperty("--un-modal-animation",P)}Y({element:i,callback:()=>{x&&i.style.removeProperty("--un-modal-animation"),b(),S()}})},D=l=>{l.preventDefault(),w()};return{autoInitModal:()=>{if(t instanceof HTMLElement&&t.addEventListener("click",$),g.length>0)for(let l of g)l.addEventListener("click",D)},showModal:$,hideModal:w,isHidden:()=>e.dataset.state==="close",cleanup:()=>{if(t instanceof HTMLElement&&t.removeEventListener("click",$),g.length>0)for(let l of g)l.removeEventListener("click",D);!m&&s instanceof HTMLElement&&s.removeEventListener("click",w),p.removeInstance("modal",e)}}},y=class{constructor(t,a={},n){r(this,"modalElement"),r(this,"showModal"),r(this,"hideModal"),r(this,"cleanup"),r(this,"isHidden"),r(this,"options"),r(this,"state");let o=typeof t=="string"?c(t):t;if(!(o instanceof HTMLElement))throw new Error("Modal element not found or invalid. Please provide a valid HTMLElement or selector.");this.modalElement=o,this.options=a,this.state=a?.defaultState||this.modalElement.dataset.state||"close";let d=p.getInstance("modal",this.modalElement);if(d)return d;this.modalElement.hasAttribute("data-fx-modal")||this.modalElement.setAttribute("data-fx-modal","");let m=o.dataset.modalId,u=(typeof n=="string"?c(n):n)||c(`[data-modal-target='${m}']`),{showModal:h,hideModal:E,autoInitModal:f,isHidden:M,cleanup:k}=_(o,u,this.options);this.state==="open"&&h(),f(),this.showModal=h,this.hideModal=E,this.isHidden=M,this.cleanup=k,p.register("modal",this.modalElement,this)}};r(y,"autoInit",(e="[data-fx-modal]")=>{let t=I(e);for(let a of t)new y(a)}),r(y,"init",(e,t={},a)=>new y(e,t,a));var F=y;function ee(e){e.directive("modal",(t,{},{cleanup:a})=>{let n=new F(t);a(()=>{n.cleanup()})})}var z=ee;document.addEventListener("alpine:init",()=>{z(window.Alpine)});})();
