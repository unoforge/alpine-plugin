(()=>{var L=Object.defineProperty,I=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i=(e,t,n)=>I(e,typeof t!="symbol"?t+"":t,n),C=(e,t=document.body)=>t.querySelector(e),m=(e,t=document.body)=>Array.from(t.querySelectorAll(e)),S=({newElement:e,existingElement:t})=>{if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))throw new Error("Both parameters must be valid HTML elements.");let n=t.parentElement;if(n)n.insertBefore(e,t);else throw new Error("Existing element must have a parent element.")},T=({element:e,callback:t,type:n,keysCheck:a})=>{let s=getComputedStyle(e),o=s.transition;if(o!=="none"&&o!==""&&!a.includes(o)){let l="transitionend",d=()=>{e.removeEventListener(l,d),t()};e.addEventListener(l,d,{once:!0})}else t()},$=({element:e,callback:t})=>{T({element:e,callback:t,type:"transition",keysCheck:["all 0s ease 0s","all"]})},E=(e,t,n)=>{let a=new CustomEvent(t,{detail:n});e.dispatchEvent(a)},H=e=>{var t;return(t=e.parentElement)==null?void 0:t.removeChild(e)},k=e=>{e.setAttribute("data-state","invisible"),$({element:e,callback(){H(e)}})},M=(e,t)=>{let n=e;if(n===""||!n)return;let a=document.createElement("div");if(a.setAttribute("aria-hidden","true"),a.setAttribute("data-state","visible"),a.setAttribute("data-fx-offcanvas-overlay",""),a.setAttribute("data-offcanvas-el",t),n==="")return;let s=n.split(" ");return n!==""&&a.classList.add(...s),a},y=(e,t,n)=>{e.setAttribute("aria-hidden",n==="open"?"false":"true"),e.setAttribute("data-state",n),t||W(n)},W=e=>{document.body.style.overflow=e==="open"?"hidden":"",document.body.style.overflowY=e==="open"?"hidden":"auto"},G=(e,t)=>{if(e===t)return;e.setAttribute("aria-hidden","true"),e.setAttribute("data-state","close");let n=C(`[data-fx-offcanvas-overlay][data-offcanvas-el=${e.getAttribute("id")}]`,e.parentElement);n instanceof HTMLElement&&k(n)},R=e=>{let t=m("[data-fx-offcanvas][data-state=open]");if(!(t.length<=0))for(let n of t)G(n,e)},r=class{static initGlobalRegistry(){window.$flexillaInstances||(window.$flexillaInstances={})}static register(t,n,a){return this.initGlobalRegistry(),window.$flexillaInstances[t]||(window.$flexillaInstances[t]=[]),this.getInstance(t,n)||(window.$flexillaInstances[t].push({element:n,instance:a}),a)}static getInstance(t,n){var a,s;return this.initGlobalRegistry(),(s=(a=window.$flexillaInstances[t])==null?void 0:a.find(o=>o.element===n))==null?void 0:s.instance}static removeInstance(t,n){this.initGlobalRegistry(),window.$flexillaInstances[t]&&(window.$flexillaInstances[t]=window.$flexillaInstances[t].filter(a=>a.element!==n))}},c=class{constructor(t,n={}){i(this,"offCanvasElement"),i(this,"offCanvasTriggers"),i(this,"offCanvasCloseBtns"),i(this,"allowBodyScroll"),i(this,"staticBackdrop"),i(this,"backdrop"),i(this,"options"),i(this,"closeWhenClickOutSide",f=>{let v=this.offCanvasElement.getAttribute("data-state")==="open",h=!this.offCanvasElement.contains(f.target)&&![...this.offCanvasTriggers].includes(f.target);v&&h&&this.closeOffCanvas()}),i(this,"closeOffCanvas",()=>{var f,v,h,b,w;let g=!1;if(E(this.offCanvasElement,"offcanvas-before-hide",{offcanvasId:this.offCanvasElement.id,setExitAction:B=>{g=B}}),((h=(v=(f=this.options).beforeHide)==null?void 0:v.call(f))==null?void 0:h.cancelAction)||g)return;let x=this.offCanvasElement.getAttribute("id"),u=C(`[data-fx-offcanvas-overlay][data-offcanvas-el=${x}]`);u instanceof HTMLElement&&k(u),y(this.offCanvasElement,this.allowBodyScroll,"close"),document.removeEventListener("keydown",this.closeWithEsc),!this.allowBodyScroll&&!u&&document.removeEventListener("click",this.closeWhenClickOutSide),(w=(b=this.options).onHide)==null||w.call(b),E(this.offCanvasElement,"offcanvas-close",{offcanvasId:this.offCanvasElement.id})}),i(this,"closeWithEsc",f=>{f.preventDefault(),f.key==="Escape"&&this.closeOffCanvas()}),i(this,"changeState",()=>{this.offCanvasElement.getAttribute("data-state")==="open"?this.closeOffCanvas():this.openOffCanvas()});let a=typeof t=="string"?C(t):t;if(!(a instanceof HTMLElement))throw new Error("Invalid Offcanvas, the provided Element is not a valid HTMLElement");let s=r.getInstance("offcanvas",a);if(s)return s;this.options=n;let{staticBackdrop:o,allowBodyScroll:l,backdrop:d}=this.options;this.offCanvasElement=a,this.setupAttributes(),this.staticBackdrop=o||a.hasAttribute("data-static-backdrop")&&a.dataset.staticBackdrop!=="false"||!1,this.allowBodyScroll=l||a.hasAttribute("data-allow-body-scroll")&&a.dataset.allowBodyScroll!=="false"||!1;let p=this.offCanvasElement.getAttribute("id");this.offCanvasTriggers=this.findOffCanvasElements("[data-offcanvas-trigger]",!1,p),this.offCanvasCloseBtns=this.findOffCanvasElements("[data-offcanvas-close]",!0,p,this.offCanvasElement),this.backdrop=d||this.offCanvasElement.dataset.offcanvasBackdrop||"",this.setupOffcanvas(),r.register("offcanvas",this.offCanvasElement,this)}findOffCanvasElements(t,n,a,s){return n?m(`${t}`,s):m(`${t}[data-target=${a}]`)}setupAttributes(){this.offCanvasElement.hasAttribute("data-fx-offcanvas")||this.offCanvasElement.setAttribute("data-fx-offcanvas","")}openOffCanvas(){var t,n,a,s;(n=(t=this.options).beforeShow)==null||n.call(t),R(this.offCanvasElement),y(this.offCanvasElement,this.allowBodyScroll,"open");let o=this.offCanvasElement.getAttribute("id"),l=M(this.backdrop,o);l instanceof HTMLElement&&(S({newElement:l,existingElement:this.offCanvasElement}),this.staticBackdrop||l.addEventListener("click",this.closeOffCanvas)),document.addEventListener("keydown",this.closeWithEsc),(s=(a=this.options).onShow)==null||s.call(a),E(this.offCanvasElement,"offcanvas-open",{offcanvasId:this.offCanvasElement.id})}initCloseBtns(){for(let t of this.offCanvasCloseBtns)t.addEventListener("click",this.closeOffCanvas)}initTriggers(){for(let t of this.offCanvasTriggers)t.addEventListener("click",this.changeState)}setupOffcanvas(){this.initTriggers(),this.initCloseBtns()}open(){this.openOffCanvas()}close(){this.closeOffCanvas()}cleanup(){for(let t of this.offCanvasTriggers)t.removeEventListener("click",this.changeState);for(let t of this.offCanvasCloseBtns)t.removeEventListener("click",this.closeOffCanvas);document.removeEventListener("keydown",this.closeWithEsc),this.allowBodyScroll||document.removeEventListener("click",this.closeWhenClickOutSide),r.removeInstance("offcanvas",this.offCanvasElement)}};i(c,"autoInit",(e="[data-fx-offcanvas]")=>{let t=m(e);for(let n of t)new c(n)}),i(c,"init",(e,t={})=>new c(e,t));var A=c;function q(e){e.directive("offcanvas",(t,{},{cleanup:n})=>{let a=new A(t);n(()=>{a.cleanup()})})}var O=q;document.addEventListener("alpine:init",()=>{O(window.Alpine)});})();
